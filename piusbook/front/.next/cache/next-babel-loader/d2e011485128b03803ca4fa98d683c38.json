{"ast":null,"code":"import produce from 'immer'; // import faker from 'faker';\n// import shortid from 'shortid';\n\nimport { ADD_POST_REQUEST, ADD_POST_SUCCESS, ADD_POST_FAILURE, ADD_COMMENT_REQUEST, ADD_COMMENT_SUCCESS, ADD_COMMENT_FAILURE, ADD_POST_TO_ME, REMOVE_POST_OF_MINE, REMOVE_POST_REQUEST, REMOVE_POST_SUCCESS, REMOVE_POST_FAILURE, LOAD_POST_REQUEST, LOAD_POST_SUCCESS, LOAD_POST_FAILURE, LIKE_POST_REQUEST, LIKE_POST_SUCCESS, LIKE_POST_FAILURE, UNLIKE_POST_REQUEST, UNLIKE_POST_SUCCESS, UNLIKE_POST_FAILURE, UPLOAD_IMAGES_REQUEST, UPLOAD_IMAGES_SUCCESS, UPLOAD_IMAGES_FAILURE, REMOVE_IMAGE, RETWEET_SUCCESS, RETWEET_REQUEST, RETWEET_FAILURE, LOAD_A_POST_REQUEST, LOAD_A_POST_SUCCESS, LOAD_A_POST_FAILURE } from '../actions';\nexport var initialState = {\n  mainPosts: [// {\n    // \tid: shortid.generate(),\n    // \tUser: {\n    // \t\tid: 1,\n    // \t\tnickname: 'pius',\n    // \t},\n    // \tcontent: '#Hello#react made by #pius ',\n    // \tImages: [\n    // \t\t{\n    // \t\t\tid: shortid.generate(),\n    // \t\t\tsrc:\n    // \t\t\t\t'https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcRL13vWu8GOWHAFISKo9v5oBEU75C9udknN2w&usqp=CAU',\n    // \t\t},\n    // \t\t{\n    // \t\t\tid: shortid.generate(),\n    // \t\t\tsrc:\n    // \t\t\t\t'https://i.pinimg.com/736x/0b/2f/8a/0b2f8a51314ab1ebe0505aee843a33b1.jpg',\n    // \t\t},\n    // \t\t{\n    // \t\t\tid: shortid.generate(),\n    // \t\t\tsrc:\n    // \t\t\t\t'https://pbs.twimg.com/profile_images/1256251357763235842/zY8KO59p_400x400.jpg',\n    // \t\t},\n    // \t],\n    // \tComments: [\n    // \t\t{\n    // \t\t\tid: shortid.generate(),\n    // \t\t\tUser: {\n    // \t\t\t\tid: shortid.generate(),\n    // \t\t\t\tnickname: 'aksfbs',\n    // \t\t\t},\n    // \t\t\tcontent: '안녕하세요',\n    // \t\t},\n    // \t],\n    // Likers: []\n    // },\n  ],\n  imagePaths: [],\n  singlePost: {},\n  addPostLoading: false,\n  addPostDone: false,\n  addPostError: null,\n  addCommentLoading: false,\n  addCommentDone: false,\n  addCommentError: null,\n  removePostLoading: false,\n  removePostDone: false,\n  removePostError: null,\n  loadPostLoading: false,\n  loadPostDone: false,\n  loadPostError: null,\n  hasMorePosts: true,\n  likePostLoading: false,\n  likePostDone: false,\n  likePostError: null,\n  unlikePostLoading: false,\n  unlikePostDone: false,\n  unlikePostError: null,\n  uploadImagestLoading: false,\n  uploadImagestDone: false,\n  uploadImagestError: null,\n  retweetLoading: false,\n  retweetDone: false,\n  retweetError: null,\n  loadAPostLoading: false,\n  loadAPostDone: false,\n  loadAPostError: null\n}; // export const generateDummyPost = num =>\n// \tArray(num)\n// \t\t.fill()\n// \t\t.map((item, idx) => ({\n// \t\t\tid: shortid.generate(),\n// \t\t\tUser: {\n// \t\t\t\tid: shortid.generate(),\n// \t\t\t\tnickname: faker.name.findName(),\n// \t\t\t},\n// \t\t\tcontent: faker.lorem.paragraph(),\n// \t\t\tImages: [],\n// \t\t\tComments: [\n// \t\t\t\t{\n// \t\t\t\t\tid: shortid.generate(),\n// \t\t\t\t\tUser: {\n// \t\t\t\t\t\tid: shortid.generate(),\n// \t\t\t\t\t\tnickname: faker.name.findName(),\n// \t\t\t\t\t},\n// \t\t\t\t\tcontent: faker.lorem.paragraph(),\n// \t\t\t\t},\n// \t\t\t],\n// \t\t}));\n// initialState.mainPosts = initialState.mainPosts.concat(\n// \tArray(20)\n// \t\t.fill()\n// \t\t.map((item, idx) => ({\n// \t\t\tid: shortid.generate(),\n// \t\t\tUser: {\n// \t\t\t\tid: shortid.generate(),\n// \t\t\t\tnickname: faker.name.findName(),\n// \t\t\t},\n// \t\t\tcontent: faker.lorem.paragraph(),\n// \t\t\tImages: [],\n// \t\t\tComments: [\n// \t\t\t\t{\n// \t\t\t\t\tid: shortid.generate(),\n// \t\t\t\t\tUser: {\n// \t\t\t\t\t\tid: shortid.generate(),\n// \t\t\t\t\t\tnickname: faker.name.findName(),\n// \t\t\t\t\t},\n// \t\t\t\t\tcontent: faker.lorem.paragraph(),\n// \t\t\t\t},\n// \t\t\t],\n// \t\t})),\n// );\n// const dummyPost = data => ({\n// \tid: data.id,\n// \tUser: {\n// \t\tid: 1,\n// \t\tnickname: 'pius',\n// \t},\n// \tcontent: data.content,\n// \tImage: [],\n// \tComments: [],\n// });\n// const dummyComment = data => ({\n// \tid: shortid.generate(),\n// \tUser: {\n// \t\tnickname: 'aksfbs',\n// \t},\n// \tcontent: data,\n// });\n\nexport var addPostRequest = function addPostRequest(data) {\n  return {\n    type: ADD_POST_REQUEST,\n    data: data\n  };\n};\nexport var removePostRequest = function removePostRequest(data) {\n  return {\n    type: REMOVE_POST_REQUEST,\n    data: data\n  };\n};\nexport var addCommentRequest = function addCommentRequest(data) {\n  return {\n    type: ADD_COMMENT_REQUEST,\n    data: data\n  };\n};\n\nvar reducer = function reducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  return produce(state, function (draftState) {\n    switch (action.type) {\n      // POST\n      case ADD_POST_REQUEST:\n        draftState.addPostLoading = true;\n        draftState.addPostDone = false;\n        break;\n\n      case ADD_POST_SUCCESS:\n        // draftState.mainPosts.unshift(dummyPost(action.data));\n        draftState.mainPosts.unshift(action.data);\n        draftState.addPostLoading = false;\n        draftState.addPostDone = true;\n        draftState.imagePaths = [];\n        break;\n\n      case ADD_POST_FAILURE:\n        draftState.addPostError = action.data;\n        break;\n      // Comment\n\n      case ADD_COMMENT_REQUEST:\n        draftState.addCommentLoading = true;\n        draftState.addCommentDone = false;\n        draftState.addCommentError = null;\n        break;\n\n      case ADD_COMMENT_SUCCESS:\n        {\n          //action.data.content, postId, userId\n          // comment form에서 comment를 추가할때,\n          // store에 있는 mainPosts를 찾아서 추가해준다.\n          var idx = draftState.mainPosts.findIndex(function (item) {\n            return item.id === action.data.PostId;\n          });\n          console.log('idx', idx);\n          console.log(action.data);\n          draftState.mainPosts[idx].Comments.unshift(action.data // dummyComment(action.data.content),\n          );\n          draftState.addCommentLoading = false;\n          draftState.addCommentDone = true;\n          break;\n        }\n\n      case ADD_COMMENT_FAILURE:\n        draftState.addCommentError = action.data;\n        break;\n\n      case REMOVE_POST_REQUEST:\n        draftState.removePostLoading = true;\n        draftState.removePostDone = false;\n        break;\n\n      case REMOVE_POST_SUCCESS:\n        draftState.removePostLoading = false;\n        draftState.removePostDone = true;\n        draftState.mainPosts = draftState.mainPosts.filter(function (item) {\n          return item.id !== action.data.PostId;\n        });\n        break;\n\n      case REMOVE_POST_FAILURE:\n        draftState.removePostLoading = false;\n        draftState.removePostError = action.data;\n        break;\n\n      case LOAD_POST_REQUEST:\n        draftState.loadPostLoading = true;\n        draftState.loadPostDone = false;\n        break;\n\n      case LOAD_POST_SUCCESS:\n        draftState.loadPostLoading = false;\n        draftState.loadPostDone = true;\n        console.log(action.data);\n        draftState.mainPosts = draftState.mainPosts.concat(action.data);\n        draftState.hasMorePosts = action.data.length === 10;\n        break;\n\n      case LOAD_POST_FAILURE:\n        draftState.loadPostError = action.data;\n        break;\n      // 좋아요 버튼\n\n      case LIKE_POST_REQUEST:\n        draftState.likePostLoading = true;\n        draftState.likePostDone = false;\n        break;\n\n      case LIKE_POST_SUCCESS:\n        {\n          var _idx = draftState.mainPosts.findIndex(function (item) {\n            return item.id === action.data.PostId;\n          });\n\n          draftState.mainPosts[_idx].Likers.push({\n            id: action.data.UserId\n          });\n\n          draftState.likePostLoading = false;\n          draftState.likePostDone = true;\n          break;\n        }\n\n      case LIKE_POST_FAILURE:\n        draftState.likePostError = action.data;\n        break;\n      // 좋아요 버튼 취소\n\n      case UNLIKE_POST_REQUEST:\n        draftState.unlikePostLoading = true;\n        draftState.unlikePostDone = false;\n        break;\n\n      case UNLIKE_POST_SUCCESS:\n        {\n          // draftState.mainPosts.unshift(dummyPost(action.data));\n          var _idx2 = draftState.mainPosts.findIndex(function (item) {\n            return item.id === action.data.PostId;\n          });\n\n          var userIdx = draftState.mainPosts[_idx2].Likers.findIndex(function (user) {\n            return user.id === action.data.UserId;\n          });\n\n          draftState.mainPosts[_idx2].Likers.splice(userIdx, 1);\n\n          draftState.unlikePostLoading = false;\n          draftState.unlikePostDone = true;\n          break;\n        }\n\n      case UNLIKE_POST_FAILURE:\n        draftState.unlikePostError = action.data;\n        break;\n      // 이미지 업로드\n\n      case UPLOAD_IMAGES_REQUEST:\n        draftState.uploadImagesLoading = true;\n        draftState.uploadImagesDone = false;\n        break;\n\n      case UPLOAD_IMAGES_SUCCESS:\n        draftState.imagePaths = action.data;\n        draftState.uploadImagesLoading = false;\n        draftState.uploadImagesDone = true;\n        break;\n\n      case UPLOAD_IMAGES_FAILURE:\n        draftState.uploadImagesLoading = false;\n        draftState.uploadImagesError = action.data;\n        break;\n\n      case REMOVE_IMAGE:\n        console.log(action.data);\n        draftState.imagePaths.splice(action.data, 1);\n        break;\n\n      case RETWEET_REQUEST:\n        draftState.retweetLoading = true;\n        draftState.retweetDone = false;\n        break;\n\n      case RETWEET_SUCCESS:\n        // draftState.mainPosts.unshift(dummyPost(action.data));\n        draftState.mainPosts.unshift(action.data);\n        draftState.retweetLoading = false;\n        draftState.retweetDone = true;\n        break;\n\n      case RETWEET_FAILURE:\n        console.log(action.data);\n        draftState.retweetError = action.data;\n        break;\n\n      case LOAD_A_POST_REQUEST:\n        draftState.loadAPostLoading = true;\n        draftState.loadAPostDone = false;\n        break;\n\n      case LOAD_A_POST_SUCCESS:\n        console.log('success', action.data);\n        draftState.loadAPostLoading = false;\n        draftState.loadAPostDone = true;\n        draftState.singlePost = action.data;\n        break;\n\n      case LOAD_A_POST_FAILURE:\n        console.log('failure', action.data);\n        draftState.loadAPostError = action.data;\n        break;\n\n      default:\n        break;\n    }\n  });\n};\n\nexport default reducer;","map":{"version":3,"sources":["/Users/pius712/Documents/GitHub/react-todo-list/piusbook/front/reducer/post.js"],"names":["produce","ADD_POST_REQUEST","ADD_POST_SUCCESS","ADD_POST_FAILURE","ADD_COMMENT_REQUEST","ADD_COMMENT_SUCCESS","ADD_COMMENT_FAILURE","ADD_POST_TO_ME","REMOVE_POST_OF_MINE","REMOVE_POST_REQUEST","REMOVE_POST_SUCCESS","REMOVE_POST_FAILURE","LOAD_POST_REQUEST","LOAD_POST_SUCCESS","LOAD_POST_FAILURE","LIKE_POST_REQUEST","LIKE_POST_SUCCESS","LIKE_POST_FAILURE","UNLIKE_POST_REQUEST","UNLIKE_POST_SUCCESS","UNLIKE_POST_FAILURE","UPLOAD_IMAGES_REQUEST","UPLOAD_IMAGES_SUCCESS","UPLOAD_IMAGES_FAILURE","REMOVE_IMAGE","RETWEET_SUCCESS","RETWEET_REQUEST","RETWEET_FAILURE","LOAD_A_POST_REQUEST","LOAD_A_POST_SUCCESS","LOAD_A_POST_FAILURE","initialState","mainPosts","imagePaths","singlePost","addPostLoading","addPostDone","addPostError","addCommentLoading","addCommentDone","addCommentError","removePostLoading","removePostDone","removePostError","loadPostLoading","loadPostDone","loadPostError","hasMorePosts","likePostLoading","likePostDone","likePostError","unlikePostLoading","unlikePostDone","unlikePostError","uploadImagestLoading","uploadImagestDone","uploadImagestError","retweetLoading","retweetDone","retweetError","loadAPostLoading","loadAPostDone","loadAPostError","addPostRequest","data","type","removePostRequest","addCommentRequest","reducer","state","action","draftState","unshift","idx","findIndex","item","id","PostId","console","log","Comments","filter","concat","length","Likers","push","UserId","userIdx","user","splice","uploadImagesLoading","uploadImagesDone","uploadImagesError"],"mappings":"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","sourcesContent":["import produce from 'immer';\n// import faker from 'faker';\n// import shortid from 'shortid';\nimport {\n\tADD_POST_REQUEST,\n\tADD_POST_SUCCESS,\n\tADD_POST_FAILURE,\n\tADD_COMMENT_REQUEST,\n\tADD_COMMENT_SUCCESS,\n\tADD_COMMENT_FAILURE,\n\tADD_POST_TO_ME,\n\tREMOVE_POST_OF_MINE,\n\tREMOVE_POST_REQUEST,\n\tREMOVE_POST_SUCCESS,\n\tREMOVE_POST_FAILURE,\n\tLOAD_POST_REQUEST,\n\tLOAD_POST_SUCCESS,\n\tLOAD_POST_FAILURE,\n\tLIKE_POST_REQUEST,\n\tLIKE_POST_SUCCESS,\n\tLIKE_POST_FAILURE,\n\tUNLIKE_POST_REQUEST,\n\tUNLIKE_POST_SUCCESS,\n\tUNLIKE_POST_FAILURE,\n\tUPLOAD_IMAGES_REQUEST,\n\tUPLOAD_IMAGES_SUCCESS,\n\tUPLOAD_IMAGES_FAILURE,\n\tREMOVE_IMAGE,\n\tRETWEET_SUCCESS,\n\tRETWEET_REQUEST,\n\tRETWEET_FAILURE,\n\tLOAD_A_POST_REQUEST,\n\tLOAD_A_POST_SUCCESS,\n\tLOAD_A_POST_FAILURE,\n} from '../actions';\n\nexport const initialState = {\n\tmainPosts: [\n\t\t// {\n\t\t// \tid: shortid.generate(),\n\t\t// \tUser: {\n\t\t// \t\tid: 1,\n\t\t// \t\tnickname: 'pius',\n\t\t// \t},\n\t\t// \tcontent: '#Hello#react made by #pius ',\n\t\t// \tImages: [\n\t\t// \t\t{\n\t\t// \t\t\tid: shortid.generate(),\n\t\t// \t\t\tsrc:\n\t\t// \t\t\t\t'https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcRL13vWu8GOWHAFISKo9v5oBEU75C9udknN2w&usqp=CAU',\n\t\t// \t\t},\n\t\t// \t\t{\n\t\t// \t\t\tid: shortid.generate(),\n\t\t// \t\t\tsrc:\n\t\t// \t\t\t\t'https://i.pinimg.com/736x/0b/2f/8a/0b2f8a51314ab1ebe0505aee843a33b1.jpg',\n\t\t// \t\t},\n\t\t// \t\t{\n\t\t// \t\t\tid: shortid.generate(),\n\t\t// \t\t\tsrc:\n\t\t// \t\t\t\t'https://pbs.twimg.com/profile_images/1256251357763235842/zY8KO59p_400x400.jpg',\n\t\t// \t\t},\n\t\t// \t],\n\t\t// \tComments: [\n\t\t// \t\t{\n\t\t// \t\t\tid: shortid.generate(),\n\t\t// \t\t\tUser: {\n\t\t// \t\t\t\tid: shortid.generate(),\n\t\t// \t\t\t\tnickname: 'aksfbs',\n\t\t// \t\t\t},\n\t\t// \t\t\tcontent: '안녕하세요',\n\t\t// \t\t},\n\t\t// \t],\n\t\t// Likers: []\n\t\t// },\n\t],\n\timagePaths: [],\n\tsinglePost: {},\n\taddPostLoading: false,\n\taddPostDone: false,\n\taddPostError: null,\n\taddCommentLoading: false,\n\taddCommentDone: false,\n\taddCommentError: null,\n\tremovePostLoading: false,\n\tremovePostDone: false,\n\tremovePostError: null,\n\tloadPostLoading: false,\n\tloadPostDone: false,\n\tloadPostError: null,\n\thasMorePosts: true,\n\tlikePostLoading: false,\n\tlikePostDone: false,\n\tlikePostError: null,\n\tunlikePostLoading: false,\n\tunlikePostDone: false,\n\tunlikePostError: null,\n\tuploadImagestLoading: false,\n\tuploadImagestDone: false,\n\tuploadImagestError: null,\n\tretweetLoading: false,\n\tretweetDone: false,\n\tretweetError: null,\n\tloadAPostLoading: false,\n\tloadAPostDone: false,\n\tloadAPostError: null,\n};\n// export const generateDummyPost = num =>\n// \tArray(num)\n// \t\t.fill()\n// \t\t.map((item, idx) => ({\n// \t\t\tid: shortid.generate(),\n// \t\t\tUser: {\n// \t\t\t\tid: shortid.generate(),\n// \t\t\t\tnickname: faker.name.findName(),\n// \t\t\t},\n// \t\t\tcontent: faker.lorem.paragraph(),\n// \t\t\tImages: [],\n// \t\t\tComments: [\n// \t\t\t\t{\n// \t\t\t\t\tid: shortid.generate(),\n// \t\t\t\t\tUser: {\n// \t\t\t\t\t\tid: shortid.generate(),\n// \t\t\t\t\t\tnickname: faker.name.findName(),\n// \t\t\t\t\t},\n// \t\t\t\t\tcontent: faker.lorem.paragraph(),\n// \t\t\t\t},\n// \t\t\t],\n// \t\t}));\n// initialState.mainPosts = initialState.mainPosts.concat(\n// \tArray(20)\n// \t\t.fill()\n// \t\t.map((item, idx) => ({\n// \t\t\tid: shortid.generate(),\n// \t\t\tUser: {\n// \t\t\t\tid: shortid.generate(),\n// \t\t\t\tnickname: faker.name.findName(),\n// \t\t\t},\n// \t\t\tcontent: faker.lorem.paragraph(),\n// \t\t\tImages: [],\n// \t\t\tComments: [\n// \t\t\t\t{\n// \t\t\t\t\tid: shortid.generate(),\n// \t\t\t\t\tUser: {\n// \t\t\t\t\t\tid: shortid.generate(),\n// \t\t\t\t\t\tnickname: faker.name.findName(),\n// \t\t\t\t\t},\n// \t\t\t\t\tcontent: faker.lorem.paragraph(),\n// \t\t\t\t},\n// \t\t\t],\n// \t\t})),\n// );\n// const dummyPost = data => ({\n// \tid: data.id,\n// \tUser: {\n// \t\tid: 1,\n// \t\tnickname: 'pius',\n// \t},\n// \tcontent: data.content,\n// \tImage: [],\n// \tComments: [],\n// });\n\n// const dummyComment = data => ({\n// \tid: shortid.generate(),\n// \tUser: {\n// \t\tnickname: 'aksfbs',\n// \t},\n// \tcontent: data,\n// });\n\nexport const addPostRequest = data => {\n\treturn {\n\t\ttype: ADD_POST_REQUEST,\n\t\tdata: data,\n\t};\n};\n\nexport const removePostRequest = data => {\n\treturn {\n\t\ttype: REMOVE_POST_REQUEST,\n\t\tdata: data,\n\t};\n};\nexport const addCommentRequest = data => {\n\treturn {\n\t\ttype: ADD_COMMENT_REQUEST,\n\t\tdata: data,\n\t};\n};\n\nconst reducer = (state = initialState, action) => {\n\treturn produce(state, draftState => {\n\t\tswitch (action.type) {\n\t\t\t// POST\n\t\t\tcase ADD_POST_REQUEST:\n\t\t\t\tdraftState.addPostLoading = true;\n\t\t\t\tdraftState.addPostDone = false;\n\t\t\t\tbreak;\n\n\t\t\tcase ADD_POST_SUCCESS:\n\t\t\t\t// draftState.mainPosts.unshift(dummyPost(action.data));\n\t\t\t\tdraftState.mainPosts.unshift(action.data);\n\t\t\t\tdraftState.addPostLoading = false;\n\t\t\t\tdraftState.addPostDone = true;\n\t\t\t\tdraftState.imagePaths = [];\n\t\t\t\tbreak;\n\t\t\tcase ADD_POST_FAILURE:\n\t\t\t\tdraftState.addPostError = action.data;\n\t\t\t\tbreak;\n\t\t\t// Comment\n\t\t\tcase ADD_COMMENT_REQUEST:\n\t\t\t\tdraftState.addCommentLoading = true;\n\t\t\t\tdraftState.addCommentDone = false;\n\t\t\t\tdraftState.addCommentError = null;\n\t\t\t\tbreak;\n\t\t\tcase ADD_COMMENT_SUCCESS: {\n\t\t\t\t//action.data.content, postId, userId\n\t\t\t\t// comment form에서 comment를 추가할때,\n\t\t\t\t// store에 있는 mainPosts를 찾아서 추가해준다.\n\t\t\t\tconst idx = draftState.mainPosts.findIndex(\n\t\t\t\t\titem => item.id === action.data.PostId,\n\t\t\t\t);\n\t\t\t\tconsole.log('idx', idx);\n\t\t\t\tconsole.log(action.data);\n\t\t\t\tdraftState.mainPosts[idx].Comments.unshift(\n\t\t\t\t\taction.data,\n\t\t\t\t\t// dummyComment(action.data.content),\n\t\t\t\t);\n\t\t\t\tdraftState.addCommentLoading = false;\n\t\t\t\tdraftState.addCommentDone = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase ADD_COMMENT_FAILURE:\n\t\t\t\tdraftState.addCommentError = action.data;\n\t\t\t\tbreak;\n\t\t\tcase REMOVE_POST_REQUEST:\n\t\t\t\tdraftState.removePostLoading = true;\n\t\t\t\tdraftState.removePostDone = false;\n\t\t\t\tbreak;\n\t\t\tcase REMOVE_POST_SUCCESS:\n\t\t\t\tdraftState.removePostLoading = false;\n\t\t\t\tdraftState.removePostDone = true;\n\t\t\t\tdraftState.mainPosts = draftState.mainPosts.filter(\n\t\t\t\t\titem => item.id !== action.data.PostId,\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase REMOVE_POST_FAILURE:\n\t\t\t\tdraftState.removePostLoading = false;\n\t\t\t\tdraftState.removePostError = action.data;\n\t\t\t\tbreak;\n\t\t\tcase LOAD_POST_REQUEST:\n\t\t\t\tdraftState.loadPostLoading = true;\n\t\t\t\tdraftState.loadPostDone = false;\n\t\t\t\tbreak;\n\t\t\tcase LOAD_POST_SUCCESS:\n\t\t\t\tdraftState.loadPostLoading = false;\n\t\t\t\tdraftState.loadPostDone = true;\n\t\t\t\tconsole.log(action.data);\n\t\t\t\tdraftState.mainPosts = draftState.mainPosts.concat(action.data);\n\t\t\t\tdraftState.hasMorePosts = action.data.length === 10;\n\t\t\t\tbreak;\n\t\t\tcase LOAD_POST_FAILURE:\n\t\t\t\tdraftState.loadPostError = action.data;\n\t\t\t\tbreak;\n\t\t\t// 좋아요 버튼\n\t\t\tcase LIKE_POST_REQUEST:\n\t\t\t\tdraftState.likePostLoading = true;\n\t\t\t\tdraftState.likePostDone = false;\n\t\t\t\tbreak;\n\t\t\tcase LIKE_POST_SUCCESS: {\n\t\t\t\tconst idx = draftState.mainPosts.findIndex(\n\t\t\t\t\titem => item.id === action.data.PostId,\n\t\t\t\t);\n\t\t\t\tdraftState.mainPosts[idx].Likers.push({ id: action.data.UserId });\n\t\t\t\tdraftState.likePostLoading = false;\n\t\t\t\tdraftState.likePostDone = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase LIKE_POST_FAILURE:\n\t\t\t\tdraftState.likePostError = action.data;\n\t\t\t\tbreak;\n\t\t\t// 좋아요 버튼 취소\n\t\t\tcase UNLIKE_POST_REQUEST:\n\t\t\t\tdraftState.unlikePostLoading = true;\n\t\t\t\tdraftState.unlikePostDone = false;\n\t\t\t\tbreak;\n\n\t\t\tcase UNLIKE_POST_SUCCESS: {\n\t\t\t\t// draftState.mainPosts.unshift(dummyPost(action.data));\n\t\t\t\tconst idx = draftState.mainPosts.findIndex(\n\t\t\t\t\titem => item.id === action.data.PostId,\n\t\t\t\t);\n\t\t\t\tconst userIdx = draftState.mainPosts[idx].Likers.findIndex(\n\t\t\t\t\tuser => user.id === action.data.UserId,\n\t\t\t\t);\n\n\t\t\t\tdraftState.mainPosts[idx].Likers.splice(userIdx, 1);\n\n\t\t\t\tdraftState.unlikePostLoading = false;\n\t\t\t\tdraftState.unlikePostDone = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase UNLIKE_POST_FAILURE:\n\t\t\t\tdraftState.unlikePostError = action.data;\n\t\t\t\tbreak;\n\t\t\t// 이미지 업로드\n\t\t\tcase UPLOAD_IMAGES_REQUEST:\n\t\t\t\tdraftState.uploadImagesLoading = true;\n\t\t\t\tdraftState.uploadImagesDone = false;\n\t\t\t\tbreak;\n\n\t\t\tcase UPLOAD_IMAGES_SUCCESS:\n\t\t\t\tdraftState.imagePaths = action.data;\n\t\t\t\tdraftState.uploadImagesLoading = false;\n\t\t\t\tdraftState.uploadImagesDone = true;\n\t\t\t\tbreak;\n\t\t\tcase UPLOAD_IMAGES_FAILURE:\n\t\t\t\tdraftState.uploadImagesLoading = false;\n\t\t\t\tdraftState.uploadImagesError = action.data;\n\t\t\t\tbreak;\n\t\t\tcase REMOVE_IMAGE:\n\t\t\t\tconsole.log(action.data);\n\t\t\t\tdraftState.imagePaths.splice(action.data, 1);\n\t\t\t\tbreak;\n\t\t\tcase RETWEET_REQUEST:\n\t\t\t\tdraftState.retweetLoading = true;\n\t\t\t\tdraftState.retweetDone = false;\n\t\t\t\tbreak;\n\n\t\t\tcase RETWEET_SUCCESS:\n\t\t\t\t// draftState.mainPosts.unshift(dummyPost(action.data));\n\t\t\t\tdraftState.mainPosts.unshift(action.data);\n\t\t\t\tdraftState.retweetLoading = false;\n\t\t\t\tdraftState.retweetDone = true;\n\t\t\t\tbreak;\n\t\t\tcase RETWEET_FAILURE:\n\t\t\t\tconsole.log(action.data);\n\t\t\t\tdraftState.retweetError = action.data;\n\t\t\t\tbreak;\n\t\t\tcase LOAD_A_POST_REQUEST:\n\t\t\t\tdraftState.loadAPostLoading = true;\n\t\t\t\tdraftState.loadAPostDone = false;\n\t\t\t\tbreak;\n\n\t\t\tcase LOAD_A_POST_SUCCESS:\n\t\t\t\tconsole.log('success', action.data);\n\t\t\t\tdraftState.loadAPostLoading = false;\n\t\t\t\tdraftState.loadAPostDone = true;\n\t\t\t\tdraftState.singlePost = action.data;\n\t\t\t\tbreak;\n\t\t\tcase LOAD_A_POST_FAILURE:\n\t\t\t\tconsole.log('failure', action.data);\n\t\t\t\tdraftState.loadAPostError = action.data;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t});\n};\n\nexport default reducer;\n"]},"metadata":{},"sourceType":"module"}