{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"static/BqwjZgsBpJTp6lYmF0VtZ/pages/hashtag/[tag].js\"],{US50:function(module,__webpack_exports__,__webpack_require__){\"use strict\";eval('__webpack_require__.r(__webpack_exports__);\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__N_SSP\", function() { return __N_SSP; });\\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"q1tI\");\\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-redux */ \"/MKj\");\\n/* harmony import */ var _components_AppLayout__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../components/AppLayout */ \"1zst\");\\n/* harmony import */ var _components_PostForm__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../components/PostForm */ \"ecW4\");\\n/* harmony import */ var _components_PostCard__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../components/PostCard */ \"kduo\");\\n/* harmony import */ var _actions__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../actions */ \"dpnd\");\\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/router */ \"nOHt\");\\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_6__);\\nvar __jsx = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement;\\n\\n\\n\\n\\n\\n\\n\\n\\nvar Hashtag = function Hashtag() {\\n  var _useSelector = Object(react_redux__WEBPACK_IMPORTED_MODULE_1__[\"useSelector\"])(function (state) {\\n    return state.user;\\n  }),\\n      me = _useSelector.me;\\n\\n  var _useSelector2 = Object(react_redux__WEBPACK_IMPORTED_MODULE_1__[\"useSelector\"])(function (state) {\\n    return state.post;\\n  }),\\n      mainPosts = _useSelector2.mainPosts,\\n      hasMorePosts = _useSelector2.hasMorePosts,\\n      loadPostLoading = _useSelector2.loadPostLoading;\\n\\n  var router = Object(next_router__WEBPACK_IMPORTED_MODULE_6__[\"useRouter\"])();\\n  var tag = router.query.tag;\\n  var dispatch = Object(react_redux__WEBPACK_IMPORTED_MODULE_1__[\"useDispatch\"])();\\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function () {\\n    function onScroll() {\\n      if (window.scrollY + document.documentElement.clientHeight + 300 > document.documentElement.scrollHeight && hasMorePosts && !loadPostLoading) {\\n        // \\ub9c8\\uc9c0\\ub9c9 mainPosts\\uc758 id\\n        var lastId = mainPosts[mainPosts.length - 1] && mainPosts[mainPosts.length - 1].id;\\n        console.log(\\'lastId\\', lastId);\\n        dispatch({\\n          type: _actions__WEBPACK_IMPORTED_MODULE_5__[\"LOAD_HASHTAG_POSTS_REQUEST\"],\\n          data: tag\\n        });\\n      }\\n    }\\n\\n    window.addEventListener(\\'scroll\\', onScroll);\\n    return function () {\\n      window.removeEventListener(\\'scroll\\', onScroll);\\n    };\\n  }, [hasMorePosts, loadPostLoading, mainPosts]);\\n  return __jsx(_components_AppLayout__WEBPACK_IMPORTED_MODULE_2__[\"default\"], null, me && __jsx(_components_PostForm__WEBPACK_IMPORTED_MODULE_3__[\"default\"], null), mainPosts.map(function (post, index) {\\n    return __jsx(_components_PostCard__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\\n      key: post.id,\\n      post: post\\n    });\\n  }));\\n}; // AppLayout \\uc548\\uc5d0 \\uc788\\ub294 \\uac83\\uc774 children\\uc774 \\ub418\\ub294 \\uac83.\\n\\n\\nvar __N_SSP = true;\\n/* harmony default export */ __webpack_exports__[\"default\"] = (Hashtag);\\n\\n//# sourceURL=webpack:///./pages/hashtag/%5Btag%5D.js?')},YX5G:function(module,exports,__webpack_require__){eval('\\n    (window.__NEXT_P = window.__NEXT_P || []).push([\\n      \"/hashtag/[tag]\",\\n      function () {\\n        return __webpack_require__(/*! private-next-pages/hashtag/[tag].js */ \"US50\");\\n      }\\n    ]);\\n  \\n\\n//# sourceURL=webpack:///./node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?')},ecW4:function(module,__webpack_exports__,__webpack_require__){\"use strict\";eval('__webpack_require__.r(__webpack_exports__);\\n/* harmony import */ var _babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/slicedToArray */ \"ODXe\");\\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"q1tI\");\\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\\n/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! styled-components */ \"vOnD\");\\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-redux */ \"/MKj\");\\n/* harmony import */ var _hooks_useInput__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../hooks/useInput */ \"3zrx\");\\n/* harmony import */ var _actions_index__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../actions/index */ \"dpnd\");\\n\\nvar __jsx = react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement;\\n\\n\\n\\n\\n\\nvar Form = styled_components__WEBPACK_IMPORTED_MODULE_2__[\"default\"].form.withConfig({\\n  displayName: \"PostForm__Form\",\\n  componentId: \"sc-1fhb6li-0\"\\n})([\"margin:20px 0;background-color:#fff;\"]);\\nvar TextArea = styled_components__WEBPACK_IMPORTED_MODULE_2__[\"default\"].textarea.withConfig({\\n  displayName: \"PostForm__TextArea\",\\n  componentId: \"sc-1fhb6li-1\"\\n})([\"display:block;width:100%;\"]);\\nvar ButtonWrapper = styled_components__WEBPACK_IMPORTED_MODULE_2__[\"default\"].div.withConfig({\\n  displayName: \"PostForm__ButtonWrapper\",\\n  componentId: \"sc-1fhb6li-2\"\\n})([\"display:flex;justify-content:space-between;align-items:center;height:20px;margin:10px 0;\"]);\\nvar ImageUploadButton = styled_components__WEBPACK_IMPORTED_MODULE_2__[\"default\"].button.withConfig({\\n  displayName: \"PostForm__ImageUploadButton\",\\n  componentId: \"sc-1fhb6li-3\"\\n})([\"padding:10px 20px;display:inline-block;text-align:center;\"]);\\nvar SubmitButton = styled_components__WEBPACK_IMPORTED_MODULE_2__[\"default\"].button.withConfig({\\n  displayName: \"PostForm__SubmitButton\",\\n  componentId: \"sc-1fhb6li-4\"\\n})([\"display:inline-block;text-align:center;margin-left:auto;background-color:#5f0080;color:white;padding:10px 20px;\"]);\\nvar Wrapper = styled_components__WEBPACK_IMPORTED_MODULE_2__[\"default\"].div.withConfig({\\n  displayName: \"PostForm__Wrapper\",\\n  componentId: \"sc-1fhb6li-5\"\\n})([\"display:inline-block;width:100%;\"]);\\nvar PreviewImage = styled_components__WEBPACK_IMPORTED_MODULE_2__[\"default\"].img.withConfig({\\n  displayName: \"PostForm__PreviewImage\",\\n  componentId: \"sc-1fhb6li-6\"\\n})([\"width:200px;\"]);\\n\\nvar PostForm = function PostForm() {\\n  var dispatch = Object(react_redux__WEBPACK_IMPORTED_MODULE_3__[\"useDispatch\"])();\\n\\n  var _useInput = Object(_hooks_useInput__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(\\'\\'),\\n      _useInput2 = Object(_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_useInput, 3),\\n      text = _useInput2[0],\\n      onChangeText = _useInput2[1],\\n      setText = _useInput2[2];\\n\\n  var _useSelector = Object(react_redux__WEBPACK_IMPORTED_MODULE_3__[\"useSelector\"])(function (state) {\\n    return state.post;\\n  }),\\n      imagePaths = _useSelector.imagePaths,\\n      addPostDone = _useSelector.addPostDone;\\n\\n  var imageInput = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useRef\"])(null);\\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\\n    if (addPostDone) {\\n      setText(\\'\\');\\n    }\\n  }, [setText, addPostDone]);\\n  var handleSubmit = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useCallback\"])(function (e) {\\n    e.preventDefault();\\n\\n    if (text === \\'\\' || !text.trim()) {\\n      return;\\n    }\\n\\n    dispatch({\\n      type: _actions_index__WEBPACK_IMPORTED_MODULE_5__[\"ADD_POST_REQUEST\"],\\n      data: {\\n        content: text,\\n        image: imagePaths\\n      }\\n    });\\n  }, [text, dispatch, imagePaths]);\\n  var onChangeImages = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useCallback\"])(function (e) {\\n    console.log(\\'images\\', e.target.files);\\n    var imageFormData = new FormData();\\n    [].forEach.call(e.target.files, function (file) {\\n      imageFormData.append(\\'image\\', file);\\n    });\\n    dispatch({\\n      type: _actions_index__WEBPACK_IMPORTED_MODULE_5__[\"UPLOAD_IMAGES_REQUEST\"],\\n      data: imageFormData\\n    });\\n  });\\n  var openDialog = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useCallback\"])(function (e) {\\n    e.preventDefault();\\n    imageInput.current.click();\\n  });\\n  var onRemoveImage = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useCallback\"])(function (idx) {\\n    dispatch({\\n      type: _actions_index__WEBPACK_IMPORTED_MODULE_5__[\"REMOVE_IMAGE\"],\\n      data: idx\\n    });\\n  });\\n  return __jsx(Form, {\\n    onSubmit: handleSubmit\\n  }, __jsx(TextArea, {\\n    type: \"textarea\",\\n    row: \"4\",\\n    value: text,\\n    onChange: onChangeText\\n  }), __jsx(Wrapper, null, __jsx(ButtonWrapper, null, __jsx(\"input\", {\\n    id: \"inputButton\",\\n    name: \"image\",\\n    ref: imageInput,\\n    type: \"file\",\\n    onChange: onChangeImages,\\n    multiple: true,\\n    hidden: true\\n  }), __jsx(ImageUploadButton, {\\n    onClick: openDialog\\n  }, \"\\\\uC774\\\\uBBF8\\\\uC9C0 \\\\uC5C5\\\\uB85C\\\\uB4DC\"), __jsx(SubmitButton, {\\n    type: \"submit\"\\n  }, \"\\\\uC0DD\\\\uC131\"))), __jsx(\"div\", null, imagePaths.map(function (image, idx) {\\n    return __jsx(\"div\", {\\n      key: image\\n    }, __jsx(PreviewImage, {\\n      src: \"http://localhost:8080/\".concat(image)\\n    }), __jsx(\"button\", {\\n      onClick: function onClick() {\\n        return onRemoveImage(idx);\\n      }\\n    }, \"X\"));\\n  })));\\n};\\n\\n/* harmony default export */ __webpack_exports__[\"default\"] = (PostForm);\\n\\n//# sourceURL=webpack:///./components/PostForm.js?')}},[[\"YX5G\",\"static/runtime/webpack.js\",\"framework\",\"75fc9c18\",\"commons\",\"327627ec634afde2917f92bf790bed63885e0ff2\",\"27df5aeec10f42968c57eca835d67be94fde2e82\",\"ca60006791c45143c1ab3d3c130b84587c4628e3\"]]]);","extractedComments":[]}