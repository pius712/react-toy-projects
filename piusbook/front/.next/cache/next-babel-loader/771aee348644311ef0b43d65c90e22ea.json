{"ast":null,"code":"import produce from 'immer';\nimport faker from 'faker';\nimport shortid from 'shortid';\nimport { ADD_POST_REQUEST, ADD_POST_SUCCESS, ADD_POST_FAILURE, ADD_COMMENT_REQUEST, ADD_COMMENT_SUCCESS, ADD_COMMENT_FAILURE, ADD_POST_TO_ME, REMOVE_POST_OF_MINE, REMOVE_POST_REQUEST, REMOVE_POST_SUCCESS, REMOVE_POST_FAILURE } from '../actions';\nexport var initialState = {\n  mainPosts: [{\n    id: shortid.generate(),\n    User: {\n      id: 1,\n      nickname: 'pius'\n    },\n    content: '#Hello#react made by #pius ',\n    Images: [{\n      id: shortid.generate(),\n      src: 'https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcRL13vWu8GOWHAFISKo9v5oBEU75C9udknN2w&usqp=CAU'\n    }, {\n      id: shortid.generate(),\n      src: 'https://i.pinimg.com/736x/0b/2f/8a/0b2f8a51314ab1ebe0505aee843a33b1.jpg'\n    }, {\n      id: shortid.generate(),\n      src: 'https://pbs.twimg.com/profile_images/1256251357763235842/zY8KO59p_400x400.jpg'\n    }],\n    Comments: [{\n      id: shortid.generate(),\n      User: {\n        id: shortid.generate(),\n        nickname: 'aksfbs'\n      },\n      content: '안녕하세요'\n    }]\n  }],\n  imagePaths: [],\n  addPostLoading: false,\n  addPostDone: false,\n  addPostError: null,\n  addCommentLoading: false,\n  addCommentDone: false,\n  addCommentError: null,\n  removePostLoading: false,\n  removePostDone: false,\n  removePostError: null\n};\ninitialState.mainPosts = initialState.mainPosts.concat(Array(20).fill().map(function (item, idx) {\n  return {\n    id: shortid.generate(),\n    User: {\n      id: shortid.generate(),\n      nickname: faker.name.findName()\n    },\n    content: faker.lorem.paragraph(),\n    Images: [],\n    Comments: [{\n      id: shortid.generate(),\n      User: {\n        id: shortid.generate(),\n        nickname: ffaker.name.findName()\n      },\n      content: faker.lorem.paragraph()\n    }]\n  };\n}));\n\nvar dummyPost = function dummyPost(data) {\n  return {\n    id: data.id,\n    User: {\n      id: 1,\n      nickname: 'pius'\n    },\n    content: data.content,\n    Image: [],\n    Comments: []\n  };\n};\n\nvar dummyComment = function dummyComment(data) {\n  return {\n    id: shortid.generate(),\n    User: {\n      nickname: 'aksfbs'\n    },\n    content: data\n  };\n};\n\nexport var addPostRequest = function addPostRequest(data) {\n  return {\n    type: ADD_POST_REQUEST,\n    data: data\n  };\n};\nexport var removePostRequest = function removePostRequest(data) {\n  return {\n    type: REMOVE_POST_REQUEST,\n    data: data\n  };\n};\nexport var addCommentRequest = function addCommentRequest(data) {\n  return {\n    type: ADD_COMMENT_REQUEST,\n    data: data\n  };\n};\n\nvar reducer = function reducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  return produce(state, function (draftState) {\n    switch (action.type) {\n      // POST\n      case ADD_POST_REQUEST:\n        draftState.addPostLoading = true;\n        draftState.addPostDone = false;\n        break;\n\n      case ADD_POST_SUCCESS:\n        draftState.mainPosts.unshift(dummyPost(action.data));\n        draftState.addPostLoading = false;\n        draftState.addPostDone = true;\n        break;\n\n      case ADD_POST_FAILURE:\n        draftState.addPostError = action.error;\n        break;\n      // Comment\n\n      case ADD_COMMENT_REQUEST:\n        draftState.addCommentLoading = true;\n        draftState.addCommentDone = false;\n        draftState.addCommentError = null;\n        break;\n\n      case ADD_COMMENT_SUCCESS:\n        {\n          //action.data.content, postId, userId\n          // comment form에서 comment를 추가할때,\n          // store에 있는 mainPosts를 찾아서 추가해준다.\n          var idx = draftState.mainPosts.findIndex(function (item) {\n            return item.id === action.data.postId;\n          });\n          draftState.mainPosts[idx].Comments.unshift(dummyComment(action.data.content));\n          draftState.addCommentLoading = false;\n          draftState.addCommentDone = true;\n          break;\n        }\n\n      case ADD_COMMENT_FAILURE:\n        draftState.addCommentError = action.error;\n        break;\n\n      case REMOVE_POST_REQUEST:\n        draftState.removePostLoading = true;\n        draftState.removePostDone = false;\n        break;\n\n      case REMOVE_POST_SUCCESS:\n        draftState.removePostLoading = false;\n        draftState.removePostDone = true;\n        draftState.mainPosts = draftState.mainPosts.filter(function (item) {\n          return item.id !== action.data;\n        });\n        break;\n\n      case REMOVE_POST_FAILURE:\n        draftState.removePostLoading = false;\n        draftState.removePostError = action.data;\n        break;\n\n      default:\n        break;\n    }\n  });\n};\n\nexport default reducer;","map":{"version":3,"sources":["/Users/pius712/Documents/GitHub/react-todo-list/piusbook/front/reducer/post.js"],"names":["produce","faker","shortid","ADD_POST_REQUEST","ADD_POST_SUCCESS","ADD_POST_FAILURE","ADD_COMMENT_REQUEST","ADD_COMMENT_SUCCESS","ADD_COMMENT_FAILURE","ADD_POST_TO_ME","REMOVE_POST_OF_MINE","REMOVE_POST_REQUEST","REMOVE_POST_SUCCESS","REMOVE_POST_FAILURE","initialState","mainPosts","id","generate","User","nickname","content","Images","src","Comments","imagePaths","addPostLoading","addPostDone","addPostError","addCommentLoading","addCommentDone","addCommentError","removePostLoading","removePostDone","removePostError","concat","Array","fill","map","item","idx","name","findName","lorem","paragraph","ffaker","dummyPost","data","Image","dummyComment","addPostRequest","type","removePostRequest","addCommentRequest","reducer","state","action","draftState","unshift","error","findIndex","postId","filter"],"mappings":"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","sourcesContent":["import produce from 'immer';\nimport faker from 'faker';\nimport shortid from 'shortid';\nimport {\n\tADD_POST_REQUEST,\n\tADD_POST_SUCCESS,\n\tADD_POST_FAILURE,\n\tADD_COMMENT_REQUEST,\n\tADD_COMMENT_SUCCESS,\n\tADD_COMMENT_FAILURE,\n\tADD_POST_TO_ME,\n\tREMOVE_POST_OF_MINE,\n\tREMOVE_POST_REQUEST,\n\tREMOVE_POST_SUCCESS,\n\tREMOVE_POST_FAILURE,\n} from '../actions';\n\nexport const initialState = {\n\tmainPosts: [\n\t\t{\n\t\t\tid: shortid.generate(),\n\t\t\tUser: {\n\t\t\t\tid: 1,\n\t\t\t\tnickname: 'pius',\n\t\t\t},\n\t\t\tcontent: '#Hello#react made by #pius ',\n\t\t\tImages: [\n\t\t\t\t{\n\t\t\t\t\tid: shortid.generate(),\n\t\t\t\t\tsrc:\n\t\t\t\t\t\t'https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcRL13vWu8GOWHAFISKo9v5oBEU75C9udknN2w&usqp=CAU',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: shortid.generate(),\n\t\t\t\t\tsrc:\n\t\t\t\t\t\t'https://i.pinimg.com/736x/0b/2f/8a/0b2f8a51314ab1ebe0505aee843a33b1.jpg',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: shortid.generate(),\n\t\t\t\t\tsrc:\n\t\t\t\t\t\t'https://pbs.twimg.com/profile_images/1256251357763235842/zY8KO59p_400x400.jpg',\n\t\t\t\t},\n\t\t\t],\n\t\t\tComments: [\n\t\t\t\t{\n\t\t\t\t\tid: shortid.generate(),\n\t\t\t\t\tUser: {\n\t\t\t\t\t\tid: shortid.generate(),\n\t\t\t\t\t\tnickname: 'aksfbs',\n\t\t\t\t\t},\n\t\t\t\t\tcontent: '안녕하세요',\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t],\n\timagePaths: [],\n\taddPostLoading: false,\n\taddPostDone: false,\n\taddPostError: null,\n\taddCommentLoading: false,\n\taddCommentDone: false,\n\taddCommentError: null,\n\tremovePostLoading: false,\n\tremovePostDone: false,\n\tremovePostError: null,\n};\n\ninitialState.mainPosts = initialState.mainPosts.concat(\n\tArray(20)\n\t\t.fill()\n\t\t.map((item, idx) => ({\n\t\t\tid: shortid.generate(),\n\t\t\tUser: {\n\t\t\t\tid: shortid.generate(),\n\t\t\t\tnickname: faker.name.findName(),\n\t\t\t},\n\t\t\tcontent: faker.lorem.paragraph(),\n\t\t\tImages: [],\n\t\t\tComments: [\n\t\t\t\t{\n\t\t\t\t\tid: shortid.generate(),\n\t\t\t\t\tUser: {\n\t\t\t\t\t\tid: shortid.generate(),\n\t\t\t\t\t\tnickname: ffaker.name.findName(),\n\t\t\t\t\t},\n\t\t\t\t\tcontent: faker.lorem.paragraph(),\n\t\t\t\t},\n\t\t\t],\n\t\t})),\n);\nconst dummyPost = data => ({\n\tid: data.id,\n\tUser: {\n\t\tid: 1,\n\t\tnickname: 'pius',\n\t},\n\tcontent: data.content,\n\tImage: [],\n\tComments: [],\n});\n\nconst dummyComment = data => ({\n\tid: shortid.generate(),\n\tUser: {\n\t\tnickname: 'aksfbs',\n\t},\n\tcontent: data,\n});\nexport const addPostRequest = data => {\n\treturn {\n\t\ttype: ADD_POST_REQUEST,\n\t\tdata: data,\n\t};\n};\n\nexport const removePostRequest = data => {\n\treturn {\n\t\ttype: REMOVE_POST_REQUEST,\n\t\tdata: data,\n\t};\n};\nexport const addCommentRequest = data => {\n\treturn {\n\t\ttype: ADD_COMMENT_REQUEST,\n\t\tdata: data,\n\t};\n};\n\nconst reducer = (state = initialState, action) => {\n\treturn produce(state, draftState => {\n\t\tswitch (action.type) {\n\t\t\t// POST\n\t\t\tcase ADD_POST_REQUEST:\n\t\t\t\tdraftState.addPostLoading = true;\n\t\t\t\tdraftState.addPostDone = false;\n\t\t\t\tbreak;\n\n\t\t\tcase ADD_POST_SUCCESS:\n\t\t\t\tdraftState.mainPosts.unshift(dummyPost(action.data));\n\t\t\t\tdraftState.addPostLoading = false;\n\t\t\t\tdraftState.addPostDone = true;\n\t\t\t\tbreak;\n\t\t\tcase ADD_POST_FAILURE:\n\t\t\t\tdraftState.addPostError = action.error;\n\t\t\t\tbreak;\n\t\t\t// Comment\n\t\t\tcase ADD_COMMENT_REQUEST:\n\t\t\t\tdraftState.addCommentLoading = true;\n\t\t\t\tdraftState.addCommentDone = false;\n\t\t\t\tdraftState.addCommentError = null;\n\t\t\t\tbreak;\n\t\t\tcase ADD_COMMENT_SUCCESS: {\n\t\t\t\t//action.data.content, postId, userId\n\t\t\t\t// comment form에서 comment를 추가할때,\n\t\t\t\t// store에 있는 mainPosts를 찾아서 추가해준다.\n\t\t\t\tconst idx = draftState.mainPosts.findIndex(\n\t\t\t\t\titem => item.id === action.data.postId,\n\t\t\t\t);\n\t\t\t\tdraftState.mainPosts[idx].Comments.unshift(\n\t\t\t\t\tdummyComment(action.data.content),\n\t\t\t\t);\n\t\t\t\tdraftState.addCommentLoading = false;\n\t\t\t\tdraftState.addCommentDone = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase ADD_COMMENT_FAILURE:\n\t\t\t\tdraftState.addCommentError = action.error;\n\t\t\t\tbreak;\n\t\t\tcase REMOVE_POST_REQUEST:\n\t\t\t\tdraftState.removePostLoading = true;\n\t\t\t\tdraftState.removePostDone = false;\n\t\t\t\tbreak;\n\t\t\tcase REMOVE_POST_SUCCESS:\n\t\t\t\tdraftState.removePostLoading = false;\n\t\t\t\tdraftState.removePostDone = true;\n\t\t\t\tdraftState.mainPosts = draftState.mainPosts.filter(\n\t\t\t\t\titem => item.id !== action.data,\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase REMOVE_POST_FAILURE:\n\t\t\t\tdraftState.removePostLoading = false;\n\t\t\t\tdraftState.removePostError = action.data;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t});\n};\n\nexport default reducer;\n"]},"metadata":{},"sourceType":"module"}