{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState, useEffect, useCallback } from 'react';\nimport useSWR from 'swr';\nimport AppLayout from '../components/AppLayout';\nimport NicknameEditForm from '../components/NicknameEditForm';\nimport FollowList from '../components/FollowList';\nimport { useSelector, useDispatch } from 'react-redux';\nimport Router from 'next/router';\nimport axios from 'axios';\nimport { LOAD_FOLLOWERS_REQUEST, LOAD_FOLLOWINGS_REQUEST } from '../actions';\n\nvar fetcher = function fetcher(url) {\n  return axios.get(url, {\n    withCredentials: true\n  }).then(function (result) {\n    return result.data;\n  });\n};\n\nvar Profile = function Profile() {\n  var dispatch = useDispatch();\n\n  var _useSelector = useSelector(function (state) {\n    return state.user;\n  }),\n      me = _useSelector.me;\n\n  var _useState = useState(3),\n      followersLimit = _useState[0],\n      setFollowersLimit = _useState[1];\n\n  var _useState2 = useState(3),\n      followingsLimit = _useState2[0],\n      setFollowingsLimit = _useState2[1];\n\n  var _useSWR = useSWR(\"http://localhost:8080/user/followers?limit=\".concat(followersLimit), fetcher),\n      followers = _useSWR.data,\n      followersError = _useSWR.error;\n\n  var _useSWR2 = useSWR(\"http://localhost:8080/user/followings?limit=\".concat(followingsLimit), fetcher),\n      followings = _useSWR2.data,\n      followingsError = _useSWR2.error;\n\n  useEffect(function () {\n    // dispatch({\n    // \ttype: LOAD_MY_INFO_REQUEST,\n    // });\n    if (!me) {\n      Router.push('/');\n    }\n  }, [me]);\n  var loadMoreFollowings = useCallback(function () {\n    setFollowingsLimit(function (prev) {\n      return prev + 3;\n    });\n  }, []);\n  var loadMoreFollowers = useCallback(function () {\n    setFollowersLimit(function (prev) {\n      return prev + 3;\n    });\n  }, []);\n\n  if (!me) {\n    return __jsx(\"div\", null, \"\\uB0B4 \\uC815\\uBCF4 \\uB85C\\uB529\\uC911...\");\n  }\n\n  if (followersError || followingsError) {\n    console.error(followersError || followingsError);\n    return __jsx(\"div\", null, \"\\uD314\\uB85C\\uC6B0 \\uD314\\uB85C\\uC789 \\uB85C\\uB529 \\uC5D0\\uB7EC\\uAC00 \\uBC1C\\uC0DD\\uD588\\uC2B5\\uB2C8\\uB2E4\");\n  } // swr로 대체\n  // useEffect(() => {\n  // \tdispatch({\n  // \t\ttype: LOAD_FOLLOWERS_REQUEST,\n  // \t});\n  // \tdispatch({\n  // \t\ttype: LOAD_FOLLOWINGS_REQUEST,\n  // \t});\n  // }, []);\n  // useEffect(() => {\n  // \tif (editNicknameDone) {\n  // \t\tRouter.push('/');\n  // \t}\n  // }, [editNicknameDone]);\n\n\n  return __jsx(AppLayout, null, __jsx(NicknameEditForm, null), __jsx(FollowList, {\n    header: \"\\uD314\\uB85C\\uC789\",\n    data: followings,\n    onClickMore: loadMoreFollowings,\n    loading: !followingsError && !followings\n  }), __jsx(FollowList, {\n    header: \"\\uD314\\uB85C\\uC6CC\",\n    data: followers,\n    onClickMore: loadMoreFollowers,\n    loading: !followersError && !followers\n  }));\n};\n\nexport var __N_SSP = true;\nexport default Profile;","map":null,"metadata":{},"sourceType":"module"}